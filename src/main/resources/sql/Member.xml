<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!-- src/main/resources/mapper/memberMapper.xml -->
<mapper namespace="org.example.mapper.member.MemberMapper">

    <select id="selectMembers" resultType="org.example.model.member.Member">
        SELECT
             *
        FROM
            member
    </select>

    <select id="selectMemberByEmail" resultType="org.example.model.member.Member">
        SELECT
            *
        FROM
            member
        where
           email = #{email}
    </select>

    <select id="selectMemberIdCheck" resultType="int">
        SELECT
            count(*)
        FROM
            member
        WHERE
            email = #{email}
    </select>

    <select id="selectMemberPasswordByEmail" resultType="org.example.model.response.member.MemberPassword">
        SELECT
            password
        FROM
            member
        WHERE
            email = #{email}
    </select>


    <select id="selectMemberEmail" resultType="org.example.model.response.member.MemberEmailResponse">
        select
            email
        from
            member
        where
            member_name = #{memberName} AND cellphone = #{cellphone}
    </select>

    <select id="selectMemberMemberCheck" resultType="Integer">
        select
            1
        from
            member
        where
            member_name = #{memberName} AND cellphone = #{cellphone} and email =#{email}
    </select>

    <update id="updateMemberPassword" >
        UPDATE
            member
        SET
            password = #{password}
        WHERE
            email = #{email}
    </update>


    <update id="updateMember" >
        UPDATE
            member
        SET
            password = #{password},
            cellphone = #{cellphone}
        WHERE
            email = #{email}
    </update>

    <insert id="insertMember2" useGeneratedKeys="true" keyProperty="memberUid">
        INSERT INTO `member`(
            member_uid
            ,email
            , password
            , cellphone
            , member_name
            , created_at
        )values(
                 #{memberUid}
                , #{email}
                , #{password}
                , #{cellphone}
                , #{memberName}
                ,now()
             )
    </insert>

</mapper>
