<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <link th:href="@{/css/bootstrap.min.css}"
          href="../css/bootstrap.min.css" rel="stylesheet">
</head>
<body>

<div class="container" style="max-width: 600px">
    <div class="py-5 text-center">
        <h2>홈 화면</h2>
    </div>

    <div class="row" style="display: flex;">
        <div class="col">
            <button class="w-100 btn btn-secondary btn-lg" name="payment" value="paymnet" type="button" onclick="payment()">
                결제 하기
            </button>
        </div>
        <div class="col">
            <button class="w-100 btn btn-dark btn-lg" onclick="game()" type="button">
                게임 하기
            </button>
        </div>
        <div class="col">
            <button class="w-100 btn btn-dark btn-lg" name="logout" value="logout" onclick="logout()" type="button">
                로그아웃
            </button>
        </div>
    </div>

    <hr class="my-4">

</div>

</body>
</html>

<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
<script src="https://kit.fontawesome.com/79613ae794.js" crossorigin="anonymous"></script>
<script>
    function logout() {
        fetch('/auth/logout', {
            method: 'post'
        }).then(response => {
            if (response.status === 200) {
                // 서버에서 성공적으로 로그아웃한 경우
                // 토큰이나 세션 등을 클라이언트 측에서 삭제
                localStorage.removeItem('accessToken');
                // 기타 클라이언트 측 로그아웃 로직 추가 가능

                // 로그인 페이지로 리다이렉트 또는 다른 동작 수행
                window.location.href = '/member/login';
            } else {
                alert('로그아웃에 실패했습니다.');
            }
        })
            .catch(error => {
                console.error('로그아웃 에러:', error);
            });
    }

</script>
</body>
</html>
