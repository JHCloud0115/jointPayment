<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
</head>
<body>

<div class="container" style="max-width: 600px">
    <div class="py-5 text-center">
        <h2>홈 화면</h2>
    </div>

    <div class="row" style="display: flex;">
        <div class="col">
            <button class="w-100 btn btn-secondary btn-lg" name="payment" value="paymnet" type="button" onclick="payment()">
                결제 하기
            </button>
        </div>
        <div class="col">
            <button class="w-100 btn btn-dark btn-lg" name="game" value="game" onclick="game()" type="button">
                게임 하기
            </button>
        </div>
        <div class="col">
            <button class="w-100 btn btn-dark btn-lg" name="mypage" value="mypage" onclick="mypage()" type="button">
                 개인정보 수정
            </button>
        </div>
        <div class="col">
            <button class="w-100 btn btn-dark btn-lg" name="logout" value="logout" onclick="logout()" type="button">
                로그아웃
            </button>
        </div>
    </div>

    <hr class="my-4">

</div>

</body>
</html>

<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
<script src="https://kit.fontawesome.com/79613ae794.js" crossorigin="anonymous"></script>
<script>
    function logout() {

        const token = getCookie('accessToken');

        console.log(token);

        axios.post('/auth/logout', {}, {
            headers: {
                'Authorization': `Bearer ${token}`
            }
        })
            .then(function (response) {

                if (response.data.code === "0"){
                    deleteCookie("accessToken");
                    console.log("로그아웃 완료");

                    location.href="/member/login";
                }
            })
            .catch(function (error) {
                alert('로그아웃에 실패했습니다.');
                return false;
            });
    }

    function mypage() {
        location.href = "/member/mypage";
    }

    //쿠키삭제
    function deleteCookie(name) {
        document.cookie = name + '=; expires=Thu, 01 Jan 1970 00:00:01 GMT;';
    }

    //쿠키가져오기
    function getCookie(name) {
        const value = `; ${document.cookie}`;
        const parts = value.split(`; ${name}=`);
        if (parts.length === 2) return parts.pop().split(';').shift();
    }

</script>
</body>
</html>
